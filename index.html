<model-viewer id="modelo3D"
    src="GLB_Planta_Suculenta.glb"
    alt="Planta suculenta"
    ar
    camera-controls>
</model-viewer>

<div class="texture-buttons">
    <button class="texture-btn active" id="btn-azul">Macetero Azul</button>
    <button class="texture-btn" id="btn-rojo">Macetero Rojo</button>
</div>

<script type="module">
document.addEventListener("DOMContentLoaded", async function() {
    const modelViewer = document.getElementById("modelo3D");
    
    // Texturas para el macetero (deben estar en tu servidor)
    const textures = {
        azul: "textures/textura_platasuculenta.png",
        rojo: "textures/textura_platasuculenta2.png"
    };
    
    // Cargar texturas por adelantado
    const loadedTextures = {};
    for (const [key, url] of Object.entries(textures)) {
        loadedTextures[key] = await modelViewer.createTexture(url);
    }
    
    // FunciÃ³n para cambiar textura
    async function setMaceteroTexture(color) {
        const model = await modelViewer.getLoaded();
        if (!model) return;
        
        // Buscar el material del macetero
        const maceteroMaterial = model.materials.find(m => m.name === "Macetero_Azul");
        if (maceteroMaterial) {
            maceteroMaterial.pbrMetallicRoughness.baseColorTexture.setTexture(
                loadedTextures[color]
            );
        }
    }
    
    // Eventos de botones
    document.getElementById("btn-azul").addEventListener("click", () => {
        setMaceteroTexture('azul');
        updateButtonStates('azul');
    });
    
    document.getElementById("btn-rojo").addEventListener("click", () => {
        setMaceteroTexture('rojo');
        updateButtonStates('rojo');
    });
    
    function updateButtonStates(activeColor) {
        document.querySelectorAll('.texture-btn').forEach(btn => {
            btn.classList.toggle('active', btn.id === `btn-${activeColor}`);
        });
    }
});
</script>
